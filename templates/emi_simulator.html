{% extends "base.html" %}
{% block content %}
<section class="section" data-aos="fade-up">
  <div class="card">
    <h2>EMI Simulator</h2>
    <p class="card-subtitle">Change interest rate or tenure and see EMI instantly.</p>

    <form method="POST" class="form-grid">
      <label>Loan Amount (₹)
        <input type="number" name="loan_amount" required>
      </label>
      <label>Base Interest Rate (% p.a.)
        <input type="number" step="0.1" name="interest_rate" required>
      </label>
      <label>Base Tenure (years)
        <input type="number" step="0.5" name="tenure_years" required>
      </label>

      <div class="form-section-heading">Alternative Scenario (optional)</div>
      <label>Alternative Interest Rate (% p.a.)
        <input type="number" step="0.1" name="alt_interest_rate" placeholder="leave blank to keep same">
      </label>
      <label>Alternative Tenure (years)
        <input type="number" step="0.5" name="alt_tenure_years" placeholder="leave blank to keep same">
      </label>

      <div class="form-actions">
        <button class="btn-primary" type="submit">Simulate EMI</button>
      </div>
    </form>

    {% if result %}
      {% if result.error %}
        <p style="color:#f87171;">Error: {{ result.error }}</p>
      {% else %}
        <div class="result-note" style="margin-top:16px;">
          <h3>Base EMI</h3>
          <p>Rate: <b>{{ result.rate_base }}%</b>, Tenure: <b>{{ result.tenure_base }} years</b></p>
          <p>EMI: <b>₹{{ result.emi_base }}</b></p>

          <h3 style="margin-top:10px;">Alternative EMI</h3>
          <p>Rate: <b>{{ result.rate_alt }}%</b>, Tenure: <b>{{ result.tenure_alt }} years</b></p>
          <p>EMI: <b>₹{{ result.emi_alt }}</b></p>
        </div>
      {% endif %}
    {% endif %}
  </div>
</section>
{% endblock %}
