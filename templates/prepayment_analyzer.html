{% extends "base.html" %}
{% block content %}
<section class="section" data-aos="fade-up">
  <div class="card">
    <h2>Prepayment Analyzer</h2>
    <p class="card-subtitle">See interest saved and tenure reduced with a one-time prepayment.</p>

    <form method="POST" class="form-grid">
      <label>Loan Amount (₹)
        <input type="number" name="loan_amount" required>
      </label>
      <label>Interest Rate (% p.a.)
        <input type="number" step="0.1" name="interest_rate" required>
      </label>
      <label>Tenure (years)
        <input type="number" step="0.5" name="tenure_years" required>
      </label>
      <label>Prepayment Amount (₹)
        <input type="number" name="prepay_amount" required>
      </label>
      <label>Prepayment Month (from start)
        <input type="number" name="prepay_month" required>
      </label>
      <div class="form-actions">
        <button class="btn-primary" type="submit">Calculate Impact</button>
      </div>
    </form>

    {% if result %}
      {% if result.error %}
        <p style="color:#f87171;">Error: {{ result.error }}</p>
      {% else %}
        <div class="result-note" style="margin-top:16px;">
          <h3>Results</h3>
          <p>Base EMI: <b>₹{{ result.emi }}</b></p>
          <p>Base Total Interest: <b>₹{{ result.base_interest }}</b></p>
          <p>New Total Interest (with prepay): <b>₹{{ result.new_interest }}</b></p>
          <p>Interest Saved: <b>₹{{ result.interest_saved }}</b></p>
          <p>Original Tenure: <b>{{ result.base_months }}</b> months</p>
          <p>New Tenure: <b>{{ result.new_months }}</b> months (~{{ result.new_tenure_years }} years)</p>
          <p>Months Saved: <b>{{ result.months_saved }}</b></p>
        </div>
      {% endif %}
    {% endif %}
  </div>
</section>
{% endblock %}
